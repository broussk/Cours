#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>
#include <fcntl.h>

int main(int argc, char* argv[]){

    int PvF[2];

    int buf = open(argv[1],O_RDONLY);;

    pipe(&PvF[0]);

    if (fork()==0){
        close(PvF[1]);
        read(PvF[0], &buf, sizeof(int));

        printf("Fichier recu %d sur le procesus %d\n", buf,getpid());

        close(PvF[0]);
        exit(0);
    }

    close(PvF[0]);



    write(PvF[1],&buf, sizeof(int));

    wait(NULL);

    close(PvF[1]);

    exit(0);
}