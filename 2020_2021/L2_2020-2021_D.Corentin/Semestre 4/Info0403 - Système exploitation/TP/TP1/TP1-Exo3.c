#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <wait.h>

int main(int argc, char* argv[]){
    int n, i, j;

    do{
        printf("Entrez le nombre de processus fils et petit fils Ã  creer: \n");
        scanf("%d", &n);
    } while (n < 0);

    for(i = 0; i < n; i++){
        if(fork() == 0){
            printf("# Fils %d:  %d\n\n", i, getpid());
            for(j = 0; j < n; j++){
                if(fork() == 0){
                    printf(" - Petit fils %d : %d\n\n", j, getpid());
                    exit(0);
                }
                wait(NULL);
            }
            exit(0);
        }
        wait(NULL);
    }

    exit(0);
}