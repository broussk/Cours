#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include <fcntl.h>
#include <string.h>

void writeInFile(int file, char tab[], int size){
    scanf("%s", tab);
    strncat(tab, " ", 1);
    if(strlen(tab) <= size) for(int i = 0; i < strlen(tab); i++) write(file, &tab[i], sizeof (char));
    else {
        printf("Dépassement de taille");
        exit(0);
    }
}

int main(int argc, char * argv[]){
    int quit = 0;

    char firstname[50];
    char name[50];
    char id[10];
    char birth[20];
    double notes[15];

    int file = open(argv[1],O_RDONLY|O_CREAT|O_WRONLY, 0644);

    printf("Menu: \n 0) Saisir un étudiant\n 1) Quitter\n => Choix: ");
    scanf("%d", &quit);

    while(quit == 0){

        //Nom
        printf("-> Nom: ");
        writeInFile(file, firstname, 50);

        //Prenom
        printf("-> Prenom: ");
        writeInFile(file, name, 50);

        //Identifiant
        printf("-> Identifiant: ");
        writeInFile(file, id, 10);

        //Date de naissance
        printf("-> Date de naissance: ");
        writeInFile(file, birth, 20);

        write(file, "\n", sizeof (char));

        printf("Menu: \n 0) Saisir un étudiant\n 1) Quitter\n => Choix: ");
        scanf("%d", &quit);
    }

    close(file);
    exit(0);
}