#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int argc, char* argv[]){​​

    if(argc != 3){
      printf("usage : %s <source> <destination>\n", argv[0]);
      exit(0);
    }

    int src = open(argv[1], O_RDONLY);
    if(src == -1){
      printf("erreur a l'ouverture du fichier source: %s\n", argv[1]);
      exit(0);
    }

    int dest = open(argv[2], O_WRONLY |O_CREAT, 0700);
    if(dest == -1){
      printf("erreur a l'ouverture du fichier de destination: %s\n", argv[2]);
      exit(0);
    }

    char buf[255];
    int lu;

    while((lu=read(src, buf,255*sizeof(char)))!=0){​​
        if(lu == -1){
          printf("erreur de lecture sur: %s\n", argv[1]);
          exit(0);
        }
        write(dest, buf, lu);
    }​​

    close(src);
    close(dest);

    exit(0);
}​​
